"use strict";(self["webpackChunkelementui_jobhunt"]=self["webpackChunkelementui_jobhunt"]||[]).push([[68],{3068:function(e,t,l){l.r(t),l.d(t,{default:function(){return o}});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"userList"},[t("div",{staticClass:"search"},[t("el-input",{attrs:{placeholder:"请输入关键字搜索",clearable:""},model:{value:e.key,callback:function(t){e.key=t},expression:"key"}}),t("el-button",{on:{click:function(t){return e.search()}}},[e._v("搜索")]),t("el-button",{on:{click:function(t){return e.clear()}}},[e._v("清空搜索关键字")])],1),t("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"55"}}),t("el-table-column",{attrs:{prop:"id",label:"id",width:"100"}}),t("el-table-column",{attrs:{prop:"username",label:"昵称",width:"150"}}),t("el-table-column",{attrs:{prop:"phone",label:"手机"}}),t("el-table-column",{attrs:{prop:"email",label:"邮箱"}}),t("el-table-column",{attrs:{prop:"balance",label:"余额"}}),t("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.handleEdit(l.$index,l.row)}}},[e._v("编辑")]),t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.handleDelete(l.$index,l.row.id)}}},[e._v("删除")])]}}])})],1),t("div",{staticClass:"block"},[t("el-button",{on:{click:function(t){return e.batchdel()}}},[e._v("删除选中")]),t("el-pagination",{attrs:{background:"","current-page":e.current,"page-sizes":[1,5,10,20],"page-size":e.size,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},n=[],s={data(){return{current:1,size:10,total:1,tableData:[],multipleSelection:[],key:""}},methods:{toggleSelection(e){e?e.forEach((e=>{this.$refs.multipleTable.toggleRowSelection(e)})):this.$refs.multipleTable.clearSelection()},handleSelectionChange(e){this.multipleSelection=e},handleEdit(e,t){this.$router.push(`/userUpdate/${t.id}`)},handleDelete(e,t){this.$confirm("此操作将永久删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{const{data:e}=await this.$request.delete("/master/user/"+t);if(this.current-=1,this.selectall(),2e4===e.code){if("object"===typeof t){const e=Math.ceil((this.total-t.length)/this.size);this.current=e<this.current?e:this.current,console.log(e)}else{const e=Math.ceil((this.total-1)/this.size);this.current=e<this.current?e:this.current,console.log(e)}this.selectall(),this.$message({type:"success",message:"删除成功!"})}})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},selectall(e){this.$request.get(`/master/user/${this.current}/${this.size}/${void 0===e?"":e}`).then((e=>{this.tableData=e.data.data.records,this.total=e.data.data.total}))},handleSizeChange(e){this.current=1,this.size=e,this.selectall(this.key)},handleCurrentChange(e){this.current=e,this.selectall(this.key)},search(){this.current=1,this.selectall(this.key)},clear(){this.key="",this.current=1,this.selectall()},batchdel(){const e=[];this.multipleSelection.forEach((t=>{e.push(t.id)})),this.handleDelete(1,e)}},mounted(){this.selectall()}},i=s,r=l(1001),c=(0,r.Z)(i,a,n,!1,null,"b4977f46",null),o=c.exports}}]);
//# sourceMappingURL=68.2d1673b6.js.map