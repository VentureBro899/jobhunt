"use strict";(self["webpackChunkelementui_jobhunt"]=self["webpackChunkelementui_jobhunt"]||[]).push([[345],{345:function(e,t,l){l.r(t),l.d(t,{default:function(){return o}});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"jobList"},[t("div",{staticClass:"search"},[t("el-select",{attrs:{placeholder:"未指定分类",clearable:"",label:"选择分类"},model:{value:e.cname,callback:function(t){e.cname=t},expression:"cname"}},e._l(e.options,(function(e){return t("el-option",{key:e.value,attrs:{value:e.value}})})),1),t("el-checkbox",{attrs:{label:"置顶",border:""},model:{value:e.topping,callback:function(t){e.topping=t},expression:"topping"}}),t("el-checkbox",{attrs:{label:"上架",border:""},model:{value:e.keeping,callback:function(t){e.keeping=t},expression:"keeping"}}),t("el-input",{attrs:{placeholder:"标题",clearable:""},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}}),t("el-input",{attrs:{placeholder:"发布者",clearable:""},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),t("el-button",{on:{click:function(t){return e.search()}}},[e._v("确认筛选条件")]),t("el-button",{on:{click:function(t){return e.clear()}}},[e._v("恢复默认")])],1),t("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"55"}}),t("el-table-column",{attrs:{prop:"id",label:"id",width:"100"}}),t("el-table-column",{attrs:{prop:"title",label:"帖子标题",width:"150"}}),t("el-table-column",{attrs:{prop:"cname",label:"分类"}}),t("el-table-column",{attrs:{prop:"username",label:"发布者"}}),t("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.keeping?"正常":"下架"))]}}])}),t("el-table-column",{attrs:{label:"置顶"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.topping?"是":"否"))]}}])}),t("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.handleEdit(l.$index,l.row)}}},[e._v("编辑")]),t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.handleDelete(l.$index,l.row.id)}}},[e._v("删除")])]}}])})],1),t("div",{staticClass:"block"},[t("el-button",{on:{click:function(t){return e.batchdel()}}},[e._v("删除选中")]),t("el-pagination",{attrs:{background:"","current-page":e.current,"page-sizes":[1,5,10,20],"page-size":e.size,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},n=[],i={data(){return{current:1,size:10,title:"",username:"",cname:"",topping:!1,keeping:!0,pages:1,total:1,tableData:[],multipleSelection:[],options:[{value:"微信单"},{value:"QQ单"},{value:"需求发布"},{value:"骗子曝光"}]}},methods:{toggleSelection(e){e?e.forEach((e=>{this.$refs.multipleTable.toggleRowSelection(e)})):this.$refs.multipleTable.clearSelection()},handleSelectionChange(e){this.multipleSelection=e},handleEdit(e,t){this.$router.push(`/jobUpdate/${t.id}`)},handleDelete(e,t){this.$confirm("此操作将永久删除帖子, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{const{data:e}=await this.$request.delete("/master/job/"+t);if(2e4===e.code){if("object"===typeof t){const e=Math.ceil((this.total-t.length)/this.size);this.current=e<this.current?e:this.current,console.log(e)}else{const e=Math.ceil((this.total-1)/this.size);this.current=e<this.current?e:this.current,console.log(e)}this.selectall(),this.$message({type:"success",message:"删除成功!"})}})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},batchdel(){const e=[];this.multipleSelection.forEach((t=>{e.push(t.id)})),this.handleDelete(1,e)},selectall(e){this.$request.get(`/master/job/${this.current}/${this.size}?keeping=${this.keeping}&topping=${this.topping}\n      &title=${this.title}&cname=${this.cname}&username=${this.username}`).then((e=>{this.tableData=e.data.data.records,this.total=e.data.data.total,this.pages=e.data.data.pages}))},handleSizeChange(e){this.current=1,this.size=e,this.selectall(this.key)},handleCurrentChange(e){this.current=e,this.selectall(this.key)},search(){this.current=1,this.selectall(this.key)},clear(){this.title="",this.username="",this.cname="",this.topping=!1,this.keeping=!0,this.current=1,this.selectall()}},mounted(){this.selectall()}},s=i,c=l(1001),r=(0,c.Z)(s,a,n,!1,null,"4ea7efb0",null),o=r.exports}}]);
//# sourceMappingURL=345.87b31732.js.map